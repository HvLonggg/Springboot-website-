<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Trang ng∆∞·ªùi d√πng - ƒê·ªì ƒÉn v·∫∑t</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>

        body {
            padding-top: 70px;
        }
        .navbar-custom {
            background-color: #f8f9fa;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 1rem 3rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1030;
            transition: transform 0.3s ease-in-out;
        }

        .hidden {
            transform: translateY(-100%);
        }
        .navbar-collapse {
            display: flex !important;
            align-items: center;
            justify-content: flex-end;
            gap: 1rem;
        }

        form.logout-form {
            display: flex;
            align-items: center;
            margin-left: 0;
            padding: 0;
        }

        form.logout-form button {
            border: none;
            background-color: #0d6efd;
            color: white;
            padding: 6px 15px;
            border-radius: 0.375rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background-color 0.3s ease;
        }
        form.logout-form button:hover {
            background-color: #084298;
        }
        form.logout-form button svg {
            width: 18px;
            height: 18px;
            fill: white;
        }

        .search-input {
            min-width: 300px;
            max-width: 500px;
            border-radius: 30px;
            border: 1px solid #ced4da;
            background-color: #ffffff;
            padding: 0.375rem 1rem;
            padding-right: 2.2rem;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        }

        .search-input:focus {
            outline: none;
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13,110,253,0.25);
            background-color: #fefefe;
        }


        .search-input:focus {
            outline: none;
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13,110,253,0.25);
            background-color: #fefefe;
        }


        .btn-cart {
            background-color: #3498db;
            color: white;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }


        .btn-cart:hover {
            background-color: #2ecc71;
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 12px 24px rgba(52, 152, 219, 0.6); /* xanh d∆∞∆°ng */
        }



        .product-card {
            border-radius: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .product-card img {
            width: 100%;
            height: 180px;
            object-fit: contain;
            background-color: #ffffff;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }


        .card-body {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.4rem;
        }

        .card-text {
            color: #6c757d;
            flex-grow: 1;
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        .price-text {
            font-weight: 700;
            color: #0d6efd;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }


        .contact-icons {
            position: fixed;
            bottom: 60px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 9999;
            transition: opacity 0.5s ease;
            opacity: 1;
        }

        .contact-icons.inactive {
            opacity: 0.3;
        }

        .contact-icons:hover {
            opacity: 1 !important;
        }

        .contact-icons a {
            display: inline-block;
        }

        .contact-icons.shake a {
            animation: shake 0.5s ease-in-out infinite;
        }

        .contact-icons a img {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .contact-icons a img:hover {
            transform: scale(1.1);
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-4deg); }
            50% { transform: rotate(4deg); }
            75% { transform: rotate(-4deg); }
        }

        #snackCarousel {
            width: 100vw;
            margin: 0 auto 2rem auto;
            border-radius: 0;
            overflow: hidden;
        }

        #snackCarousel .carousel-inner {
            width: 100%;
        }

        #snackCarousel .carousel-item img {
            width: 100vw;
            height: 500px;
            object-fit: cover;
            object-position: center;
        }

        footer {
            background-color: #C0C0C0;
            color: #212529;
            padding-top: 1rem;
            padding-bottom: 1rem;
            font-size: 0.9rem;
            border-top: 1px solid #b3b3b3;
        }

        footer .container {
            max-width: 1140px;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        footer .row {
            align-items: center;
        }

        footer .col-md-4 {
            margin-bottom: 1rem;
        }

        footer h5 {
            font-weight: 700;
            margin-bottom: 0.6rem;
        }

        footer p,
        footer a {
            margin-bottom: 0.4rem;
            color: #212529;
        }

        footer a:hover {
            text-decoration: underline;
            color: #0d6efd;
        }

        footer hr {
            margin: 0.8rem 0;
            border-color: #b3b3b3;
        }

        @media (min-width: 768px) {
            footer .col-md-4.text-md-end {
                text-align: right;
                position: relative;
                left: 100px;
            }

            @media (min-width: 768px) {
                footer .col-md-4 {
                    text-align: right;
                    position: relative;
                    /*left: 20px;*/
                    right: 150px;
                }

                @media (min-width: 768px) {
                    footer .col-md-4 a {
                        text-align: right;
                        position: relative;
                        left: 25px;
                        font-size: 16px;

                    }

                    footer .d-flex.justify-content-md-end {
                        justify-content: flex-end !important;
                        position: relative;
                        right: 42px;
                    }
                }

                /* Style c√°c icon m·∫°ng x√£ h·ªôi */
                footer .footer-social-icons {
                    gap: 1.5rem;
                }

                footer .footer-social-icons a {
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    width: 35px;
                    height: 45px;
                    border-radius: 50%;
                    /*background-color: #e0e0e0;*/
                    transition: background-color 0.3s ease;
                }


                footer .footer-social-icons img {
                    width: 40px;
                    height: 40px;
                    object-fit: contain;
                    filter: invert(0); /* gi·ªØ m√†u g·ªëc icon */
                    transition: filter 0.3s ease;
                }

                footer .footer-social-icons a:hover img {
                    filter: invert(1); /* ƒë·ªïi m√†u tr·∫Øng khi hover */
                }

                /* Text copyright cƒÉn gi·ªØa v√† nh·ªè g·ªçn */
                footer .text-center {
                    font-size: 0.9rem;
                    color: #555;
                    margin-top: 0.5rem;
                    margin-bottom: 0;
                }

                footer .col-md-4:first-child {
                    text-align: left;
                    position: relative;
                    right: 120px;
                    top: 20px;
                    margin-bottom: 1rem;
                    line-height: 1.8;
                    margin-bottom: 8px;
                    list-style: none;
                }
            }
            .text-center {
                text-align: center;
                user-select: none;
                cursor: pointer;
            }
        }


    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-custom">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold text-primary" th:href="@{/user-dashboard}">üçøSnackStore</a>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                let lastScrollY = window.scrollY;
                const header = document.querySelector("nav.navbar-custom");

                if (!header) return;

                window.addEventListener("scroll", () => {
                    if (window.scrollY > lastScrollY) {
                        // Cu·ªôn xu·ªëng -> ·∫©n header
                        header.classList.add("hidden");
                    } else {
                        // Cu·ªôn l√™n -> hi·ªán header
                        header.classList.remove("hidden");
                    }
                    lastScrollY = window.scrollY;
                });
            });

        </script>


        <div class="collapse navbar-collapse">
            <!-- T√¨m ki·∫øm -->
            <form th:action="@{/user-dashboard}" method="get" class="position-relative" style="width: 300px; margin-left: -10px;">
                <input
                        type="text"
                        name="keyword"
                        class="form-control search-input pe-5"
                        placeholder="T√¨m m√≥n ƒÉn..."
                        th:value="${keyword}" />

                <button type="submit"
                        class="btn position-absolute top-50 end-0 translate-middle-y pe-3 text-muted border-0 bg-transparent">
                    üîç
                </button>
            </form>

            <!-- Gi·ªè h√†ng v√† ƒëƒÉng xu·∫•t -->
            <ul class="navbar-nav align-items-center d-flex flex-row gap-3 mb-0">
                <li class="nav-item">
                    <a class="nav-link" href="/cart">üõí Gi·ªè h√†ng </a>
                </li>
                <li class="nav-item">
                    <form th:action="@{/logout}" method="post" class="logout-form">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button type="submit" aria-label="ƒêƒÉng xu·∫•t">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 13v-2H7V8l-5 4 5 4v-3h9z"/>
                                <path d="M20 19H10v-2h10v-6H10V5h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2z"/>
                            </svg>
                            ƒêƒÉng xu·∫•t
                        </button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="position-fixed top-0 end-0 p-3" style="z-index: 1100;">
    <div id="successToast" class="toast align-items-center text-bg-success border-0 shadow-lg rounded-3"
         role="alert" aria-live="assertive" aria-atomic="true"
         th:if="${success}">
        <div class="d-flex">
            <div class="toast-body fw-semibold" th:text="${success}">Th√†nh c√¥ng!</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>



<script th:if="${success}">
    document.addEventListener('DOMContentLoaded', function () {
        var toastEl = document.getElementById('successToast');
        if (toastEl) {
            var toast = new bootstrap.Toast(toastEl, {
                autohide: true,
                delay: 3000 // 3 gi√¢y
            });
            toast.show();
        }
    });
</script>

<!-- Contact Icons -->
<div class="contact-icons">
    <a href="https://wa.me/84364892903" target="_blank">
        <img src="/uploads/whatsapp-48.png" alt="WhatsApp">
    </a>
    <a href="https://m.me/hvlongg" target="_blank">
        <img src="/uploads/messenger_logo.png" alt="Messenger">
    </a>
</div>

<script>
    const contactIcons = document.querySelector('.contact-icons');
    let scrollTimer;
    let isMouseOver = false;

    // Hi·ªáu ·ª©ng khi t·∫£i trang
    window.addEventListener('load', () => {
        activateIcons();
    });

    // Di chu·ªôt v√†o icon: lu√¥n s√°ng + rung
    contactIcons.addEventListener('mouseenter', () => {
        isMouseOver = true;
        activateIcons();
    });

    // R·ªùi chu·ªôt kh·ªèi icon
    contactIcons.addEventListener('mouseleave', () => {
        isMouseOver = false;
    });

    // Khi ng∆∞·ªùi d√πng cu·ªôn chu·ªôt
    window.addEventListener('scroll', () => {
        if (!isMouseOver) {
            deactivateIcons(); // M·ªù + ng·ª´ng rung khi ƒëang cu·ªôn
        }

        clearTimeout(scrollTimer); // Reset timer

        // Sau 2 gi√¢y kh√¥ng cu·ªôn n·ªØa th√¨ s√°ng + rung l·∫°i
        scrollTimer = setTimeout(() => {
            if (!isMouseOver) {
                activateIcons();
            }
        }, 2000);
    });

    // B·∫≠t s√°ng + rung
    function activateIcons() {
        contactIcons.classList.remove('inactive');
        contactIcons.classList.add('shake');
    }

    // L√†m m·ªù + t·∫Øt rung
    function deactivateIcons() {
        contactIcons.classList.add('inactive');
        contactIcons.classList.remove('shake');
    }
</script>


<!-- Slider Carousel -->
<div id="snackCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="1000" th:if="${snackCarouselImages != null}">
    <div class="carousel-inner rounded-3">
        <div class="carousel-item active">
            <img th:src="@{/uploads/slide1.png}" class="d-block w-100" alt="Snack Slide 1" />
            <div class="carousel-caption d-none d-md-block">
                <h5>Th·ªèa m√£n v·ªã gi√°c v·ªõi ƒë·ªì ƒÉn v·∫∑t h·∫•p d·∫´n</h5>
                <p>Kh√°m ph√° c√°c m√≥n ngon, t∆∞∆°i m·ªõi m·ªói ng√†y!</p>
            </div>
        </div>
        <div class="carousel-item">
            <img th:src="@{/uploads/slide2.png}" class="d-block w-100" alt="Snack Slide 2" />
            <div class="carousel-caption d-none d-md-block">
                <h5>∆Øu ƒë√£i ƒë·∫∑c bi·ªát</h5>
                <p>Gi·∫£m gi√° ƒë·∫øn 20% cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n</p>
            </div>
        </div>
        <div class="carousel-item">
            <img th:src="@{/uploads/slide3.png}" class="d-block w-100" alt="Snack Slide 3" />
            <div class="carousel-caption d-none d-md-block">
                <h5>Giao h√†ng nhanh ch√≥ng</h5>
                <p>ƒê·∫∑t ngay, nh·∫≠n ngay t·∫≠n tay</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#snackCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon bg-primary rounded-circle" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#snackCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon bg-primary rounded-circle" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<!-- Danh s√°ch m√≥n ƒÉn -->
<div class="container mt-4">
    <div class="row" th:if="${snacks.size() > 0}">
        <div class="col-md-3 mb-4" th:each="snack : ${snacks}">
            <div class="card product-card h-100">
                <img th:src="@{/uploads/{image}(image=${snack.imageName})}" class="card-img-top" alt="·∫¢nh m√≥n ƒÉn" />
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title" th:text="${snack.name}"></h5>
                    <p class="card-text" th:text="${snack.description}"></p>
                    <p class="price-text" th:text="${snack.formattedPrice + ' ƒë'}"></p>
                    <a th:href="@{/snacks/snack-detail/{id}(id=${snack.id})}" class="btn btn-cart w-100">üîç Chi ti·∫øt s·∫£n ph·∫©m</a>

                </div>
            </div>
        </div>
    </div>

    <div th:if="${snacks.size() == 0}" class="text-center my-5">
        <p>Kh√¥ng t√¨m th·∫•y m√≥n ƒÉn ph√π h·ª£p.</p>
    </div>
</div>


<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h5>Li√™n h·ªá</h5>
                <li><strong>Email:</strong> hvlongg@gmail.com</li>
                <li><strong>Hotline:</strong> 0364892903</li>
                <li><strong>ƒê·ªãa ch·ªâ:</strong> 57 P. Nguy·ªÖn Ho√†ng, M·ªπ ƒê√¨nh, Nam T·ª´ Li√™m, H√† N·ªôi, Vi·ªát Nam</li>
            </div>
            <div class="col-md-4">
                <h5>Th√¥ng tin</h5>
                <p><a href="/privacy" class="text-decoration-none">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></p>
                <p><a href="/terms" class="text-decoration-none">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></p>
            </div>
            <div class="col-md-4 text-md-end">
                <h5>K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</h5>
                <div class="d-flex footer-social-icons justify-content-center justify-content-md-end align-items-center">
                    <a href="https://www.facebook.com/share/1BuiuE26kS/?mibextid=wwXIfr" target="_blank" aria-label="Facebook">
                        <img src="/uploads/iconfb.png" alt="Facebook" />
                    </a>
                    <a href="https://chat.zalo.me/" target="_blank" aria-label="Zalo">
                        <img src="/uploads/zalo.png" alt="Zalo" />
                    </a>
                    <a href="https://www.instagram.com/iamm_longgg/" target="_blank" aria-label="Instagram">
                        <img src="/uploads/img.png" alt="Instagram" />
                    </a>
                </div>
            </div>
        </div>
        <hr />
        <p class="text-center">&copy; 2025 Long Snack. All rights reserved.</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
